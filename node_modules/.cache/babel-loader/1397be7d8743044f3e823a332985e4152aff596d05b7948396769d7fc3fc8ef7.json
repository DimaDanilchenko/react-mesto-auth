{"ast":null,"code":"import _toConsumableArray from\"/Users/dimad./Desktop/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/dimad./Desktop/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import EditAvatarPopup from'./EditAvatarPopup';import EditProfilePopup from'./EditProfilePopup';import AddPlacePopup from'./AddPlacePopup';import ImagePopup from'./ImagePopup';import{CurrentUserContext}from'../contexts/CurrentUserContext';import api from'../utils/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditAvatarPopupOpen=_useState2[0],setIsEditAvatarPopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setIsEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setIsAddPlacePopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDeleteCardClick=_useState8[0],setIsDeleteCardClick=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedCard=_useState10[0],setSelectedCard=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isCardLikeClick=_useState14[0],setIsCardLikeClick=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),cards=_useState16[0],setCards=_useState16[1];useEffect(function(){api.getInitialCards().then(function(res){setCards(res);}).catch(console.error);api.getUserProfile().then(function(res){setCurrentUser(res);}).catch(console.error);},[]);function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function handleDeleteCardClick(){setIsDeleteCardClick(true);}function handleAddPlaceSubmit(_ref){var name=_ref.name,link=_ref.link;api.addNewCard(name,link).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopup();}).catch(console.error);}function handleCardLike(card){// Снова проверяем, есть ли уже лайк на этой карточке\nvar isLiked=card.likes.some(function(i){return i._id===currentUser._id;});// Отправляем запрос в API и получаем обновлённые данные карточки\napi.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(console.error);}function handleUpdateUser(_ref2){var name=_ref2.name,about=_ref2.about;api.setUserProfile(name,about).then(function(res){setCurrentUser(res);closeAllPopup();}).catch(console.error);}function handleUpdateAvatar(_ref3){var avatar=_ref3.avatar;api.setUserAvatar(avatar).then(function(res){setCurrentUser(res);closeAllPopup();}).catch(console.error);}function handleCardDelete(card){api.removeCard(card._id).then(function(res){setCards(function(state){return state.filter(function(item){return item._id!==card._id;});});}).catch(console.error);}function closeAllPopup(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard(null);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopup,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopup,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopup,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopup})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Main","Footer","EditAvatarPopup","EditProfilePopup","AddPlacePopup","ImagePopup","CurrentUserContext","api","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_useState3","_useState4","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_useState5","_useState6","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_useState7","_useState8","isDeleteCardClick","setIsDeleteCardClick","_useState9","_useState10","selectedCard","setSelectedCard","_useState11","_useState12","currentUser","setCurrentUser","_useState13","_useState14","isCardLikeClick","setIsCardLikeClick","_useState15","_useState16","cards","setCards","getInitialCards","then","res","catch","console","error","getUserProfile","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","card","handleDeleteCardClick","handleAddPlaceSubmit","_ref","name","link","addNewCard","newCard","concat","_toConsumableArray","closeAllPopup","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","state","map","c","handleUpdateUser","_ref2","about","setUserProfile","handleUpdateAvatar","_ref3","avatar","setUserAvatar","handleCardDelete","removeCard","filter","item","Provider","value","children","className","onEditAvatar","onEditProfile","onAddPlace","onCardClick","onCardLike","onCardDelete","isOpen","onClose","onUpdateUser","onUpdateAvatar"],"sources":["/Users/dimad./Desktop/react-mesto-auth/src/components/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from '../utils/api';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isDeleteCardClick, setIsDeleteCardClick] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [isCardLikeClick, setIsCardLikeClick] = useState(false);\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    api.getInitialCards()\n      .then((res) => {\n        setCards(res);\n      })\n      .catch(console.error)\n    api.getUserProfile()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch(console.error)\n  }, [])\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function handleDeleteCardClick() {\n    setIsDeleteCardClick(true);\n  }\n  function handleAddPlaceSubmit({ name, link }) {\n    api.addNewCard(name, link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopup();\n      })\n      .catch(console.error)\n  }\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(console.error);\n  }\n  function handleUpdateUser({ name, about }) {\n    api.setUserProfile(name, about)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopup();\n      })\n      .catch(console.error)\n  }\n  function handleUpdateAvatar({ avatar }) {\n    api.setUserAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopup();\n      })\n      .catch(console.error);\n  }\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n      .then((res) => {\n        setCards((state) => state.filter((item) => item._id !== card._id));\n      })\n      .catch(console.error)\n  }\n  function closeAllPopup() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main\n          cards={cards}\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopup}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopup}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopup}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopup}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}